# Copyright (C) 2024-2025 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

nri:
  runtime:
    patchConfig: true

config:
  allocatorTopologyBalancing: true
  preserve:
    matchExpressions:
    - key: name
      operator: NotIn
      values:
      - vllm
  balloonTypes:
  - name: vllm-balloon
    minCPUs: 32
    maxCPUs: 32
    maxBalloons: 2
    allocatorTopologyBalancing: true
    preferNewBalloons: true
    loads:
    - llm-inference
    matchExpressions:
    - key: name
      operator: In
      values:
      - vllm
  instrumentation:
    httpEndpoint: :8891
    metrics:
      enabled:
        - policy
        - buildinfo
    prometheusExport: false
    reportPeriod: 60s
    samplingRatePerMillion: 0
  log:
    source: true
    debug:
      - policy
  pinCPU: true
  pinMemory: true
  reservedPoolNamespaces:
    - kube-system
  reservedResources:
    cpu: "2"
  loadClasses:
  - name: llm-inference
    level: core
    overloadsLevelInBalloon: true
