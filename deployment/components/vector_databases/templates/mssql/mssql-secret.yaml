{{- if index .Values "mssql" "enabled" -}}
# Copyright (C) 2024-2025 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

# Your password should follow the SQL Server default password policy. By default, the password must be at least eight characters long and contain characters from three of the following four sets: uppercase letters, lowercase letters, base-10 digits, and symbols. Passwords can be up to 128 characters long. Use passwords that are as long and complex as possible.

apiVersion: v1
kind: Secret
metadata:
  name: mssql-secret
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: mssql
    app.kubernetes.io/instance: mssql
type: Opaque
data:
  MSSQL_SA_PASSWORD: {{ .Values.vector_database_password | b64enc }}
  MSSQL_DB: {{ .Values.vector_database_name | default "vdb" | b64enc }}
  {{- if .Values.vector_database_username }}
  {{- if .Values.vector_database_password }}
  MSSQL_USER: {{ .Values.vector_database_username | default "vdbuser" | b64enc }}
  MSSQL_PASSWORD: {{ .Values.vector_database_password | b64enc }}
  {{- end }}
  {{- end }}
{{- end }}
