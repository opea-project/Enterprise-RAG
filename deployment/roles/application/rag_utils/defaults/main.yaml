# Copyright (C) 2024-2026 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

---
rag_utils:
  enabled: false
  namespace: "default"  # Currently must be "default" - do not change
  helm:
    version: "{{ helm_version }}"
    chart_version: "2.0.0"
    release_name: "rag-utils"
    chart_directory: "{{ playbook_dir }}/../components/utils/rag-utils"
    default_values_file: >-
      {{ playbook_dir }}/../components/utils/rag-utils/values.yaml

  rag_watcher:
    config:
      # One of: CronJob, Job
      deploymentMode: "CronJob"
      # CronJob schedule (every 2 minutes by default)
      schedule: "*/2 * * * *"

      successfulJobsHistoryLimit: 1
      failedJobsHistoryLimit: 2

    data:
      # Enable operation of rag watcher
      watcher_enabled: true
      # Label selector for nodes to watch (empty = all nodes)
      node_selector: ""
      # Whether to restart Istio services on reboot
      refresh_istio: true
      # Label selector for workloads to be skipped (not refreshed)
      skip_workload_selector: ""
      # When set to true, verification of workloads won't be performed after scaling
      disable_workload_verify: "true"
      # Label selector for workloads to skip verification (but still refresh)
      skip_verify_selector: ""
      # Refresh strategy: rollout-restart or downscale-upscale
      refresh_strategy: "downscale-upscale"
      # Comma-separated list of app namespaces (if empty, use ns_selector)
      app_namespaces: ""
      # Namespace selector to find app namespaces
      ns_selector: "erag-istio-protected=true"
